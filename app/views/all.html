
<!--
  Smart Table notes:
  - sorting is done by ascending, descending, then original order
  - can skip original order by setting st-skip-natural="true" on a th
  - can set a default sort with st-sort-default="true" or "reverse" on one of these th elements
-->

<div class="table-container" ng-controller="AllCtrl as ac">
  <table class="table table-striped" st-pipe="ac.callServer" st-table="ac.displayed">
    <thead>
    <tr>
      <th st-sort="msgCode">Message Code</th>
      <th st-sort="appName">App Name</th>
      <th st-sort="messageInternal">Internal Message</th>
      <th st-sort="messageLevel">Message Level</th>
      <th st-sort="language">Language</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="row in ac.displayed" class="row-highlight">
      <td ng-click="selectRow({{row}})">{{row.msgCode}}</td>
      <td ng-click="selectRow({{row}})">{{row.appName}}</td>
      <td ng-click="selectRow({{row}})">{{row.message}}</td>
      <td ng-click="selectRow({{row}})">{{row.messageLevel}}</td>
      <td ng-click="selectRow({{row}})"><span ng-show="row.msgCode">{{(row.language) ? row.language : "En"}}</span></td>
    </tr>
    </tbody>
    <tfoot>
    <tr>
      <td colspan="8" class="text-center">
        <div st-pagination="" st-items-by-page="numPerPage" st-displayed-pages="7"></div>
      </td>
    </tr>
    <tr ng-hide="messages.length"><td>No Records</td></tr>
    </tfoot>
  </table>

  <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" ng-click="closeModal()" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel">Edit Message</h4>
        </div>
        <form class="modal-body form-group">
          <input ng-model="modalMessageCode" type="text" aria-describedby="helpBlock1" class="form-control" rows="2" />
          <span id="helpBlock1" class="help-block">Message Code</span>
          <input ng-model="modalAppName" type="text" aria-describedby="helpBlock2" class="form-control" rows="2" />
          <span id="helpBlock2" class="help-block">App Name</span>
          <textarea ng-model="modalInternalMessage" type="text" aria-describedby="helpBlock3" class="form-control" rows="2"></textarea>
          <span id="helpBlock3" class="help-block">Internal Message</span>
          <input ng-model="modalMessageLevel" type="text" aria-describedby="helpBlock4" class="form-control" rows="2" />
          <span id="helpBlock4" class="help-block">Message Level</span>
          <input ng-model="modalLanguage" type="text" aria-describedby="helpBlock5" class="form-control" rows="2" />
          <span id="helpBlock5" class="help-block">Language</span>
        </form>
        <div class="modal-footer">
          <button ng-click="closeModal()" type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-default btn-danger" data-dismiss="modal" data-toggle="modal" data-target="#confirm-delete">Delete</button>
          <button ng-click="saveMessage()" type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <!--<div class="modal-header">-->
          <!--Are you sure you want to delete this message?-->
        <!--</div>-->
        <div class="modal-body">
          Are you sure you want to delete this message?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <a ng-click="deleteMessage()" class="btn btn-danger btn-ok">Delete</a>
        </div>
      </div>
    </div>
  </div>

</div>
